<?php
function search($folio) {
    $html = "";
    try {
        $database = new Denuncia();
        $stmt = $database->searchDenuncia($folio);

        if ($stmt->num_rows > 0) {
            $row = $stmt->fetch_assoc();
            $html .= '<form id="report" method="post" onsubmit="return validateForm(this);">';
            $html .= '<h1 class="section-title">Formulario de denuncia de violencia de Género</h1>';
            $html .= renderInput("hidden", "folio", "Folio", $folio) . "<p>" . htmlspecialchars($folio) . "</p>";
            $html .= renderInput("hidden", "status", "Status", $row['Status']) . "<p>" . statusValue($row['Status']) . "</p>";
            $html .= renderHechos($row['Descripcion']);
            $html .= '<div class="date-time-container">';
            $html .= renderInput("date", "fecha", "Fecha", $row['Fecha']);
            $html .= renderInput("time", "hora", "Hora", $row['Hora']);
            $html .= '</div>';
            $html .= renderInput("text", "ubicacion", "Ubicación", $row['Ubicacion']);
            $html .= renderInput("text", "nombre", "Nombre del denunciante", $row['Nombre']);
            $html .= renderInput("text", "curp", "CURP", $row['CURP']);
            $html .= renderInput("email", "correo", "Correo", $row['Correo']);
            $html .= renderInput("tel", "telefono", "Número de teléfono", $row['Numtelefono']);
            $html .= renderTipo($row['Tipo']);

            $html .= '<div class="buttons">';
            if ($row['Status'] == 0 && $row['Verified'] == 1) {
                $html .= renderButton("update", "modificar", "Modificar", "updateDenuncia();");
            }
            $html .= renderButton("delete", "eliminar", "Eliminar", "window.modal.showModal();");
            $html .= '</div>';
            $html .= '</form>';
        } else {
            $html .= error("No se encontraron resultados para el folio proporcionado.");
        }
        $database->closeConnection();
    } catch (Exception $e) {
        $html .= error("Error al buscar el reporte: " . htmlspecialchars($e->getMessage()));
    }
    return $html;
}